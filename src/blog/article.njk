---
pagination:
    data: collections.blogPosts
    size: 1
    alias: article
permalink: "/blog/{{ article.id }}/"
layout: layouts/base.njk
eleventyComputed:
  seo:
    title: "{{ article.meta.title }}"
    description: "{{ article.meta.description }}"
    canonical: "{{ article.meta.canonical }}"
    og_title: "{{ article.meta['og:title'] }}"
    og_description: "{{ article.meta['og:description'] }}"
    og_image: "{{ article.meta['og:image'] }}"
---

{% set meta = article.meta %}

<section id="article-cover">
    <div class="container">
        <div class="cover">
            <img src="{{ article.image }}" alt="">
            <div class="page-header">
                <h1 class="section-title">{{ article.title }}</h1>
                <p class="article-meta sub-title">
                    <span>{{ article.date }}</span> •
                    <span>{{ article.readTime }}</span> •
                    <span>{{ article.category }}</span>
                </p>
            </div>
        </div>
    </div>
</section>

<main id="article-detail">
    <section>
        <div class="container">
            <a href="/blog" class="article-back">Retour à la liste</a>
            <div class="article-content">
                {{ article.content | markdown | safe }}
            </div>
            <div class="blog-articles">
                {% for article in collections.blogPosts %}
                    <a href="/blog/{{ article.id }}/" class="article-card" data-category="{{ article.category | slugify }}">
                        <div class="article-card_image">
                            <img src="{{ article.image }}" alt="{{ article.title }}" loading="lazy">
                        </div>
                        <div class="article-card_content">
                            <div class="article-card_header">
                                <h2 class="article-card_title">{{ article.title }}</h2>
                                <span class="article-card_read-time">{{ article.readTime }}</span>
                            </div>
                            <p class="article-card_description">{{ article.description }}</p>
                            <div class="article-card_meta">
                                <span>{{ article.date }}</span> • 
                                <span class="article-card_category">{{ article.category }}</span>
                            </div>
                        </div>
                    </a>
                {% endfor %}
                <div id="no-articles-message" class="blog-empty" style="display: none;">
                    <h3>Aucun article trouvé dans cette catégorie.</h3>
                </div>
            </div>
            <aside class="blog-toc">
                <h3>Articles similaires</h3>
                <ul>
                    {% set similar = collections.blogPosts | similarArticles(article) %}
                    {% if similar.length > 0 %}
                        {% for sim in similar %}
                            <li>
                                <a href="/blog/{{ sim.id }}/">
                                    {{ sim.title }}
                                </a>
                            </li>
                        {% endfor %}
                    {% else %}
                        <li>Aucun article similaire</li>
                    {% endif %}
                </ul>
            </aside>
        </div>
    </section>
</main>
